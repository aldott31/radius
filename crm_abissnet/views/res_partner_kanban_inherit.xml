<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Add Assign button to Customer Kanban View -->
    <record id="view_partner_kanban_assign_group" model="ir.ui.view">
        <field name="name">res.partner.kanban.assign.group</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="radius_odoo_integration.view_partner_kanban_isp"/>
        <field name="priority">20</field>
        <field name="arch" type="xml">

            <!-- Add work_group_id field -->
            <xpath expr="//field[@name='name']" position="before">
                <field name="work_group_id"/>
            </xpath>

            <!-- Add Assign button below the address -->
            <xpath expr="//div[@class='oe_kanban_global_click']/div[@style='font-size: 12px; color: #666;']" position="after">
                <div style="margin-top: 10px;" groups="asr_radius_manager.group_isp_field_tech,asr_radius_manager.group_isp_manager">
                    <button type="object"
                            name="action_assign_work_group"
                            class="btn btn-sm btn-primary"
                            style="width: 100%;">
                        <i class="fa fa-users"/>
                        <span t-if="!record.work_group_id.raw_value">Assign to Group</span>
                        <span t-if="record.work_group_id.raw_value">Change Group</span>
                    </button>
                    <div t-if="record.work_group_id.raw_value" style="font-size: 11px; color: #28a745; margin-top: 4px; text-align: center;">
                        <i class="fa fa-check-circle"/> <field name="work_group_id"/>
                    </div>
                </div>
            </xpath>

        </field>
    </record>

</odoo>
